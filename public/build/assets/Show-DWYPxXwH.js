import{p as x,k as L,o as r,f as u,a as s,u as i,w as c,F as f,Z as b,b as l,t as C,e as m,d as S,c as p,g as T,l as B}from"./app-Mrv2_nhE.js";import{_ as R}from"./Layout.vue_vue_type_script_setup_true_lang-CtPcOp1A.js";import{S as $,_ as I,a as N}from"./TaskItem.vue_vue_type_script_setup_true_lang-C_z06Bzq.js";import{_ as h}from"./index-BH6WRkr4.js";import{R as V}from"./refresh-ccw-EMreQbjv.js";import"./Input.vue_vue_type_script_setup_true_lang-Cqo8g78x.js";const z={class:"text-xl font-semibold"},E={class:"space-y-2"},j={class:"flex justify-around p-2"},W={__name:"Show",props:{canLogin:{type:Boolean},canRegister:{type:Boolean},list:{type:Object,required:!0}},setup(e){const g=e,a=x([]);L(()=>{g.list.tasks.forEach(t=>{a.push(t)})});async function k(){d(),localStorage.removeItem("taskListId"),await _()}function d(){a.splice(0,a.length)}async function y(t){d();try{(await axios.get("/list/"+t)).data.tasks.forEach(n=>{a.push(n)})}catch{console.log("creating a new one")}}async function _(){const t=await axios.post("/lists");list.value=t.data,localStorage.setItem("taskListId",t.data.id)}function v(t){a.push(t)}async function w(){window.isSecureContext&&navigator.clipboard&&(await navigator.clipboard.writeText("https://abbio.com/share/"+list.value.id),alert("Copied"))}return(t,o)=>(r(),u(f,null,[s(i(b),{title:"Welcome"}),s(R,{"can-login":"canLogin","can-register":"canRegister"},{header:c(()=>[l("h1",z,"Reference: "+C(e.list.id),1),s(i(h),{variant:"outline",size:"sm",class:"ml-auto gap-1.5 text-sm",onClick:m(w,["prevent"])},{default:c(()=>[s(i($),{class:"size-3.5"}),S(" Share ")]),_:1})]),default:c(()=>[e.list&&e.list.id?(r(),p(I,{key:0,"list-id":e.list.id,onTaskAdded:v},null,8,["list-id"])):T("",!0),l("div",E,[(r(!0),u(f,null,B(a,n=>(r(),p(N,{key:n.id,task:n,onTaskUpdated:o[0]||(o[0]=F=>y(e.list.id))},null,8,["task"]))),128))]),l("div",j,[s(i(h),{variant:"outline",onClick:m(k,["prevent"])},{default:c(()=>[s(i(V),{size:"14",class:"text-gray-900"})]),_:1})])]),_:1})],64))}};export{W as default};
