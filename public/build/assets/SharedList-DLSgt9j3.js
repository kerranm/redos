import{p as h,k as g,o as i,c as d,w as r,b as k,t as _,a as o,u as c,d as y,e as x,Z as w,f as p,F as b,l as v,g as S}from"./app-Mrv2_nhE.js";import{S as T,_ as B,a as C}from"./TaskItem.vue_vue_type_script_setup_true_lang-C_z06Bzq.js";import{_ as L}from"./index-BH6WRkr4.js";import{_ as $}from"./Layout.vue_vue_type_script_setup_true_lang-CtPcOp1A.js";import"./Input.vue_vue_type_script_setup_true_lang-Cqo8g78x.js";const N={class:"text-xl font-semibold"},V={key:0,class:"space-y-2"},A={__name:"SharedList",props:{canLogin:{type:Boolean},canRegister:{type:Boolean},list:{type:Object}},setup(s){const n=s,t=h([]);g(()=>{n.list&&n.list.tasks.length>0&&n.list.tasks.forEach(e=>{t.push(e)})});async function f(){window.isSecureContext&&navigator.clipboard&&(await navigator.clipboard.writeText("https://abbio.com/share/"+list.value.id),alert("Copied"))}async function u(e){t.splice(0,t.length);try{const a=await axios.get("/list/"+e);a.data.tasks&&t.push(...a.data.tasks)}catch{console.log("creating a new one")}}function m(e){t.push(e)}return(e,a)=>(i(),d($,{"can-login":"canLogin","can-register":"canRegister"},{header:r(()=>[k("h1",N,"Reference: "+_(s.list.id),1),o(c(L),{variant:"outline",size:"sm",class:"ml-auto gap-1.5 text-sm",onClick:x(f,["prevent"])},{default:r(()=>[o(c(T),{class:"size-3.5"}),y(" Share ")]),_:1})]),default:r(()=>[o(c(w),{title:"Shared List"}),o(B,{"list-id":s.list.id,onTaskAdded:m},null,8,["list-id"]),t&&t.length>0?(i(),p("div",V,[(i(!0),p(b,null,v(t,l=>(i(),d(C,{key:l.id,task:l,onTaskUpdated:a[0]||(a[0]=R=>u(s.list.id))},null,8,["task"]))),128))])):S("",!0)]),_:1}))}};export{A as default};
